<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A Path That Leads to Us</title>
<style>
  body {
    margin: 0;
    background: radial-gradient(circle at top, #ffd1e8, #ffc2dd);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: monospace;
  }
  canvas {
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  }
  #msg {
    position: absolute;
    bottom: 25px;
    background: rgba(255,255,255,0.95);
    padding: 12px 18px;
    border-radius: 14px;
    color: #444;
    font-size: 14px;
    max-width: 520px;
    text-align: center;
    display: none;
  }

  /* SECRET OVERLAY */
  #secretOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 999;
  }
  #secretBox {
    background: #fff0f7;
    padding: 28px;
    border-radius: 20px;
    max-width: 620px;
    max-height: 75vh;
    overflow-y: auto;
    box-shadow: 0 30px 80px rgba(0,0,0,0.3);
  }
  #secretBox h2 {
    text-align: center;
    color: #ff3f8b;
    margin-bottom: 14px;
  }
  #secretBox p {
    font-size: 14px;
    line-height: 1.7;
    color: #444;
    white-space: pre-wrap;
  }
  #secretBox button {
    margin: 18px auto 0;
    display: block;
    padding: 8px 18px;
    border-radius: 12px;
    border: none;
    background: #ff3f8b;
    color: white;
    cursor: pointer;
    font-family: monospace;
  }
</style>
</head>
<body>

<canvas id="game" width="640" height="400"></canvas>
<div id="msg"></div>

<!-- SECRET MESSAGE -->
<div id="secretOverlay">
  <div id="secretBox">
    <h2>üíó hey‚Ä¶ one more thing</h2>
    <p>
Ameer, if you‚Äôre reading this, you definitely clicked around out of curiosity.
That feels very you lol.

I just wanted you to know how much you mean to me.
Even from miles away, you‚Äôve been my comfort, my constant,
my safe place when everything else felt loud or heavy.
There were days I didn‚Äôt think I‚Äôd make it through,
and somehow you were always there ‚Äî checking in, listening,
loving me without conditions.

Long distance isn‚Äôt easy, but neither are we.
And we still choose each other every single day.
That says everything.

You‚Äôre stronger than you realize.
You‚Äôve helped me grow, heal, breathe again.
I don‚Äôt say it enough, but I‚Äôm so proud of you.
And I‚Äôm so grateful you‚Äôre mine.

I love you endlessly. Always you. ü§ç
    </p>
    <button onclick="closeSecret()">close</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const msgBox = document.getElementById("msg");

let keys = {};
let level = 0;
let finished = false;
let started = false;

let shake = 0;
let particles = [];

/* SECRET CLICK LOGIC */
let secretClicks = 0;
let secretShown = false;

document.addEventListener("click",()=>{
  if(secretShown) return;
  secretClicks++;
  if(secretClicks === 14){
    document.getElementById("secretOverlay").style.display = "flex";
    secretShown = true;
  }
});
function closeSecret(){
  document.getElementById("secretOverlay").style.display = "none";
}

/* floating hearts */
const floatingHearts = Array.from({length: 18}, () => ({
  x: Math.random() * canvas.width,
  y: Math.random() * canvas.height,
  s: Math.random() * 1.2 + 0.4,
  sp: Math.random() * 0.3 + 0.15
}));

const levels = [
  { goal:{x:600,y:200}, msg:"This is where everything started.", obstacles:[{x:220,y:140,w:120,h:16,dx:1.2,dy:0}] },
  { goal:{x:520,y:80}, msg:"Every late night with you mattered.", obstacles:[{x:160,y:150,w:180,h:16,dx:1.4,dy:0},{x:360,y:240,w:180,h:16,dx:-1.4,dy:0}] },
  { goal:{x:300,y:50}, msg:"Even when things were hard, you stayed.", obstacles:[{x:100,y:110,w:220,h:16,dx:0,dy:1.2},{x:340,y:190,w:220,h:16,dx:0,dy:-1.2}] },
  { goal:{x:560,y:330}, msg:"I will never stop choosing you.", obstacles:[{x:80,y:120,w:480,h:14,dx:0,dy:1.4},{x:80,y:220,w:480,h:14,dx:0,dy:-1.4}] },
  { goal:{x:40,y:40}, msg:"No matter how many times I fall, I still find you.", obstacles:[{x:140,y:80,w:360,h:14,dx:1.6,dy:0},{x:140,y:160,w:360,h:14,dx:-1.6,dy:0},{x:140,y:240,w:360,h:14,dx:1.6,dy:0}] }
];

const player = { x:30, y:200, r:14, speed:3 };

function reset(){ player.x=30; player.y=200; }

function spawnParticles(x,y){
  for(let i=0;i<10;i++){
    particles.push({x,y,dx:(Math.random()-0.5)*4,dy:(Math.random()-0.5)*4,life:30});
  }
}

function drawHeart(x,y,r,color,glow=false){
  ctx.save();
  ctx.fillStyle=color;
  if(glow){ctx.shadowColor=color;ctx.shadowBlur=15;}
  ctx.beginPath();
  ctx.moveTo(x,y);
  ctx.bezierCurveTo(x-r,y-r,x-r*2,y+r/2,x,y+r*2);
  ctx.bezierCurveTo(x+r*2,y+r/2,x+r,y-r,x,y);
  ctx.fill();
  ctx.restore();
}

function hit(o){
  return player.x+player.r>o.x && player.x-player.r<o.x+o.w &&
         player.y+player.r>o.y && player.y-player.r<o.y+o.h;
}

function showMessage(text){
  msgBox.innerText=text;
  msgBox.style.display="block";
  setTimeout(()=>msgBox.style.display="none",2000);
}

function update(){
  if(!started||finished) return;

  if(keys["ArrowUp"]||keys["w"]) player.y-=player.speed;
  if(keys["ArrowDown"]||keys["s"]) player.y+=player.speed;
  if(keys["ArrowLeft"]||keys["a"]) player.x-=player.speed;
  if(keys["ArrowRight"]||keys["d"]) player.x+=player.speed;

  levels[level].obstacles.forEach(o=>{
    o.x+=o.dx; o.y+=o.dy;
    if(o.x<=0||o.x+o.w>=canvas.width) o.dx*=-1;
    if(o.y<=0||o.y+o.h>=canvas.height) o.dy*=-1;
    if(hit(o)){ shake=8; spawnParticles(player.x,player.y); reset(); }
  });

  const g=levels[level].goal;
  if(Math.hypot(player.x-g.x,player.y-g.y)<20){
    showMessage(levels[level].msg);
    level++; reset();
    if(level>=levels.length) finished=true;
  }

  floatingHearts.forEach(h=>{h.y-=h.sp;if(h.y<-10)h.y=canvas.height+10;});
  particles=particles.filter(p=>(p.life--)>0);
  if(shake>0) shake--;
}

function draw(){
  ctx.save();
  if(shake>0) ctx.translate((Math.random()-0.5)*shake,(Math.random()-0.5)*shake);

  ctx.fillStyle="#fff0f7";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  floatingHearts.forEach(h=>drawHeart(h.x,h.y,6,"rgba(255,120,170,0.4)"));

  if(!started){
    ctx.fillStyle="#ff3f8b";
    ctx.font="32px monospace";
    ctx.textAlign="center";
    ctx.fillText("A Path That Leads to Us üíó",canvas.width/2,160);
    ctx.font="16px monospace";
    ctx.fillText("Move with WASD or Arrow Keys",canvas.width/2,210);
    ctx.fillText("Press any key to begin",canvas.width/2,235);
    ctx.restore(); return;
  }

  if(finished){
    ctx.fillStyle="#ff3f8b";
    ctx.textAlign="center";
    ctx.font="30px monospace";
    ctx.fillText("Happy Valentine‚Äôs Day ‚ù§Ô∏è",canvas.width/2,180);
    ctx.font="16px monospace";
    ctx.fillText("Every level was just me choosing you.",canvas.width/2,220);
    ctx.fillText("I‚Äôd restart a thousand times for you.",canvas.width/2,245);
    ctx.restore(); return;
  }

  ctx.fillStyle="#6b5b7a";
  levels[level].obstacles.forEach(o=>ctx.fillRect(o.x,o.y,o.w,o.h));
  drawHeart(levels[level].goal.x,levels[level].goal.y,12,"#ff9fc7",true);
  drawHeart(player.x,player.y,player.r,"#ff3f8b",true);
  particles.forEach(p=>drawHeart(p.x,p.y,4,"rgba(255,80,140,0.8)"));

  ctx.restore();
}

function loop(){ update(); draw(); requestAnimationFrame(loop); }
window.addEventListener("keydown",e=>{keys[e.key]=true;if(!started)started=true;});
window.addEventListener("keyup",e=>keys[e.key]=false);
loop();
</script>
</body>
</html>
